{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Aysha\\\\Desktop\\\\Aysha\\\\SJSU\\\\Fall 2019\\\\CMPE 295A\\\\project\\\\frontend\\\\src\\\\components\\\\ThreatSummary\\\\SearchThreats.js\";\nimport React, { Component } from \"react\";\nimport '../../App.css';\nimport LeftDrawer from '../Drawer/Drawer';\nimport axios from 'axios';\nimport { connect } from \"react-redux\";\nimport * as inputField from \"../../styles/inputField\";\nimport * as threatDisplayStyles from \"../../styles/threatimages\";\nimport Button from '@material-ui/core/Button';\nimport { searchButton } from \"../../styles/button\";\nimport * as radioStyles from \"../../styles/searchRadio\";\nimport { reduxForm } from \"redux-form\";\nimport { Redirect } from \"react-router-dom\";\nimport backendURL from \"../../backendUrl\";\n\nclass SearchThreats extends Component {\n  constructor(props) {\n    super(props);\n\n    this.search = e => {\n      e.preventDefault();\n      var validSearch = true;\n\n      if (e.target.searchQuery.value.length === 0) {\n        this.props.searchError(\"query\");\n        validSearch = false;\n      }\n\n      var checked;\n      if (e.target.dateRadio.checked) checked = \"date\";else if (e.target.cameraRadio.checked) checked = \"camera_id\";else if (e.target.locationRadio.checked) checked = \"location\";else if (e.target.certaintyRadio.checked) checked = \"certainty\";else {\n        this.props.searchError(\"radio\");\n        validSearch = false;\n      }\n\n      if (validSearch) {\n        var searchQuery = {\n          query: e.target.searchQuery.value,\n          checked: checked\n        };\n        this.props.search(searchQuery);\n      }\n    };\n\n    if (sessionStorage.getItem(\"user\") == null || sessionStorage.getItem(\"user\") == \"null\") {\n      this.state = {\n        redirectVar: React.createElement(Redirect, {\n          to: \"/signin\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 24\n          },\n          __self: this\n        })\n      };\n    } else {\n      this.state = {\n        redirectVar: null\n      };\n      if (this.props.allThreats.length == 0) this.props.threats();\n    }\n\n    this.search = this.search.bind(this);\n  }\n\n  renderField(field) {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45\n      },\n      __self: this\n    }, React.createElement(\"input\", Object.assign({\n      style: field.style,\n      required: true,\n      placeholder: field.placeholder,\n      type: field.type\n    }, field.input, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46\n      },\n      __self: this\n    })));\n  }\n\n  render() {\n    var threatsDisplay = [];\n\n    for (var i = 0; i < this.props.displayThreats.length; i++) {\n      const index = i;\n      threatsDisplay.push(React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }));\n      threatsDisplay.push(React.createElement(\"img\", {\n        src: this.props.displayThreats[index].link,\n        style: threatDisplayStyles.threatImage,\n        onClick: () => {\n          this.props.threatsummary(index);\n          this.setState({\n            redirectVar: React.createElement(Redirect, {\n              to: \"/threat-summary\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 96\n              },\n              __self: this\n            })\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }));\n      threatsDisplay.push(React.createElement(\"div\", {\n        style: threatDisplayStyles.threatDetails,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, React.createElement(\"table\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, \"Camera\")), React.createElement(\"td\", {\n        style: threatDisplayStyles.threatDetailsPadding,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, this.props.displayThreats[index].camera_id)), React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, \"Date\")), React.createElement(\"td\", {\n        style: threatDisplayStyles.threatDetailsPadding,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, this.props.displayThreats[index].date\n      /*threatDetails.threatDetails.threats[i].date*/\n      )), React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, \"Location\")), React.createElement(\"td\", {\n        style: threatDisplayStyles.threatDetailsPadding,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, this.props.displayThreats[index].location)), React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, \"Certainty\")), React.createElement(\"td\", {\n        style: threatDisplayStyles.threatDetailsPadding,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, this.props.displayThreats[index].certainty)))));\n      if (i + 1 < this.props.displayThreats.length && (i + 1) % 4 == 0) threatsDisplay.push(React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }));\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(LeftDrawer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.search,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      placeholder: \"Search by camera ID, date, location or certainty of threat\",\n      name: \"searchQuery\",\n      style: inputField.searchInput,\n      type: \"text\",\n      id: \"searchQuery\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    })), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, React.createElement(Button, {\n      style: searchButton,\n      type: \"submit\",\n      variant: \"contained\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, \"Search\")), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, React.createElement(Button, {\n      style: searchButton,\n      type: \"reset\",\n      variant: \"contained\",\n      onClick: () => this.props.resetSearch(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, \"Clear\"))), React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      style: radioStyles.radioLabel,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"radio\",\n      name: \"searchRadio\",\n      id: \"cameraRadio\",\n      style: radioStyles.searchRadio,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }), \"Camera\"), React.createElement(\"label\", {\n      style: radioStyles.radioLabel,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"radio\",\n      name: \"searchRadio\",\n      id: \"dateRadio\",\n      style: radioStyles.radioMargin,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }), \"Date\"), React.createElement(\"label\", {\n      style: radioStyles.radioLabel,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"radio\",\n      name: \"searchRadio\",\n      id: \"locationRadio\",\n      style: radioStyles.radioMargin,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }), \"Location\"), React.createElement(\"label\", {\n      style: radioStyles.radioLabel,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"radio\",\n      name: \"searchRadio\",\n      id: \"certaintyRadio\",\n      style: radioStyles.radioMargin,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }), \"Certainty\"))))), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, this.state.redirectVar, React.createElement(\"table\", {\n      style: threatDisplayStyles.threatImageTable,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, threatsDisplay)));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    allThreats: state.threatsReducer.allThreats,\n    displayThreats: state.threatsReducer.displayThreats,\n    searchErrorMsg: state.threatsReducer.searchErrorMsg,\n    searchError: state.threatsReducer.searchError,\n    el: state.threatsReducer.el\n  };\n};\n\nconst mapDispatchStateToProps = dispatch => {\n  return {\n    threats: () => {\n      var threatsData = [];\n      axios.get(backendURL + '/threat-details').then(result => {\n        threatsData = result.data;\n        dispatch({\n          type: \"threats\",\n          payload: threatsData\n        });\n      });\n    },\n    threatsummary: id => {\n      dispatch({\n        type: \"threatsummary\",\n        payload: id\n      });\n    },\n    search: searchQuery => {\n      dispatch({\n        type: \"search\",\n        payload: searchQuery\n      });\n    },\n    resetSearch: () => {\n      dispatch({\n        type: \"resetSearch\"\n      });\n    },\n    searchError: type => {\n      dispatch({\n        type: \"searchError\",\n        payload: type\n      });\n    }\n  };\n};\n\nexport default reduxForm({\n  form: \"SignupForm\"\n})(connect(mapStateToProps, mapDispatchStateToProps)(SearchThreats));","map":{"version":3,"sources":["C:/Users/Aysha/Desktop/Aysha/SJSU/Fall 2019/CMPE 295A/project/frontend/src/components/ThreatSummary/SearchThreats.js"],"names":["React","Component","LeftDrawer","axios","connect","inputField","threatDisplayStyles","Button","searchButton","radioStyles","reduxForm","Redirect","backendURL","SearchThreats","constructor","props","search","e","preventDefault","validSearch","target","searchQuery","value","length","searchError","checked","dateRadio","cameraRadio","locationRadio","certaintyRadio","query","sessionStorage","getItem","state","redirectVar","allThreats","threats","bind","renderField","field","style","placeholder","type","input","render","threatsDisplay","i","displayThreats","index","push","link","threatImage","threatsummary","setState","threatDetails","threatDetailsPadding","camera_id","date","location","certainty","searchInput","resetSearch","radioLabel","searchRadio","radioMargin","threatImageTable","mapStateToProps","threatsReducer","searchErrorMsg","el","mapDispatchStateToProps","dispatch","threatsData","get","then","result","data","payload","id","form"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport '../../App.css';\r\nimport LeftDrawer from '../Drawer/Drawer';\r\nimport axios from 'axios';\r\nimport { connect } from \"react-redux\";\r\nimport * as inputField from  \"../../styles/inputField\";\r\nimport * as threatDisplayStyles from \"../../styles/threatimages\";\r\nimport Button from '@material-ui/core/Button'\r\nimport {searchButton} from \"../../styles/button\";\r\nimport * as radioStyles from \"../../styles/searchRadio\";\r\nimport {  reduxForm } from \"redux-form\";\r\nimport {  Redirect } from \"react-router-dom\";\r\n\r\nimport backendURL from \"../../backendUrl\";\r\n\r\nclass SearchThreats extends Component {\r\n\r\n    constructor(props){\r\n        super(props); \r\n\r\n        if(sessionStorage.getItem(\"user\") == null || sessionStorage.getItem(\"user\") == \"null\")\r\n        {\r\n            this.state = {\r\n                 redirectVar :  <Redirect to= \"/signin\"/>\r\n            }\r\n        }\r\n        else{\r\n            this.state = {\r\n                redirectVar :  null\r\n            }\r\n            if(this.props.allThreats.length == 0)\r\n               this.props.threats();\r\n     \r\n        }\r\n\r\n             \r\n       \r\n         this.search = this.search.bind(this);\r\n    }\r\n\r\n    \r\n    renderField(field) {\r\n     \r\n        return (\r\n            <div>\r\n                <input style= {field.style} required placeholder={field.placeholder} type={field.type} {...field.input} />\r\n            </div>  \r\n            \r\n        );\r\n    }\r\n    search = (e) =>{\r\n        e.preventDefault();\r\n        var validSearch = true;\r\n        if(e.target.searchQuery.value.length === 0)\r\n        {\r\n            this.props.searchError(\"query\");\r\n            validSearch = false;\r\n        }\r\n       \r\n        var checked;\r\n        if(e.target.dateRadio.checked)\r\n            checked = \"date\";\r\n        else if(e.target.cameraRadio.checked)\r\n            checked = \"camera_id\";\r\n        else if(e.target.locationRadio.checked)\r\n            checked = \"location\";\r\n   \r\n        else if(e.target.certaintyRadio.checked)\r\n            checked = \"certainty\";\r\n        else\r\n        {\r\n            this.props.searchError(\"radio\");\r\n            validSearch = false;\r\n        }\r\n\r\n        if(validSearch)\r\n        {\r\n            var searchQuery ={\r\n                query : e.target.searchQuery.value,\r\n                checked : checked\r\n            }\r\n            this.props.search(searchQuery);\r\n        }\r\n\r\n    }\r\n    render() {\r\n  \r\n    var threatsDisplay=[] ;\r\n\r\n         \r\n         for(var i = 0; i<this.props.displayThreats.length; i++)\r\n            {\r\n                \r\n                 const index =i;\r\n                threatsDisplay.push(<td></td>);\r\n                threatsDisplay.push(<img src ={this.props.displayThreats[index].link} style={threatDisplayStyles.threatImage} onClick={()=>{this.props.threatsummary(index) ; this.setState({redirectVar : <Redirect to=\"/threat-summary\"/>})}}></img>);\r\n                threatsDisplay.push(<div style={threatDisplayStyles.threatDetails}>\r\n                    <table>\r\n                    <tr>\r\n                        <td><b>Camera</b></td>\r\n                        <td style={threatDisplayStyles.threatDetailsPadding}>{this.props.displayThreats[index].camera_id}</td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td><b>Date</b></td>\r\n                        <td style={threatDisplayStyles.threatDetailsPadding}>{this.props.displayThreats[index].date/*threatDetails.threatDetails.threats[i].date*/}</td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td><b>Location</b></td>\r\n                        <td style={threatDisplayStyles.threatDetailsPadding}>{this.props.displayThreats[index].location}</td>\r\n                    </tr>\r\n                   \r\n                   \r\n                    <tr>\r\n                        <td><b>Certainty</b></td>\r\n                        <td style={threatDisplayStyles.threatDetailsPadding}>{this.props.displayThreats[index].certainty}</td>\r\n                    </tr>\r\n           \r\n                </table>\r\n                </div>)\r\n                if(i+1<this.props.displayThreats.length && (i+1)%4 ==0)\r\n                    threatsDisplay.push(<tr></tr>);\r\n            }\r\n    \r\n        return (\r\n        <div   >\r\n            <LeftDrawer></LeftDrawer>\r\n            <div >\r\n                <form onSubmit = {this.search}>\r\n                    <table >\r\n                        <tr>\r\n                            <td>\r\n                                <input placeholder=\"Search by camera ID, date, location or certainty of threat\"\r\n                                       name=\"searchQuery\"\r\n                                       style= {inputField.searchInput}\r\n                                       type = \"text\"\r\n                                       id = \"searchQuery\"\r\n                                />\r\n                           </td>\r\n                           <td>\r\n                           <Button style={searchButton} type= \"submit\" variant=\"contained\" >Search</Button>\r\n                         \r\n                           </td>\r\n                            <td>\r\n                                <Button  style={searchButton} type=\"reset\"  variant=\"contained\" onClick={() => this.props.resetSearch()} >Clear</Button>\r\n                            </td>\r\n                        </tr>\r\n                        <tr >\r\n                                <label style={radioStyles.radioLabel} ><input type=\"radio\" name=\"searchRadio\" id=\"cameraRadio\" style={radioStyles.searchRadio}></input>Camera</label>\r\n\r\n                                <label style={radioStyles.radioLabel} ><input type=\"radio\" name=\"searchRadio\" id=\"dateRadio\" style={radioStyles.radioMargin}></input>Date</label>\r\n                                <label style={radioStyles.radioLabel} ><input type=\"radio\" name=\"searchRadio\" id=\"locationRadio\"  style={radioStyles.radioMargin}></input>Location</label>\r\n\r\n                                <label style={radioStyles.radioLabel}><input type=\"radio\" name=\"searchRadio\" id=\"certaintyRadio\" style={radioStyles.radioMargin}></input>Certainty</label>  \r\n                        </tr>\r\n                        \r\n                    </table>\r\n                </form>\r\n            \r\n            </div>\r\n\r\n            <div>\r\n                {this.state.redirectVar}\r\n                 <table style={threatDisplayStyles.threatImageTable} >\r\n                    {threatsDisplay}\r\n                 </table>\r\n            </div>\r\n   \r\n        </div> \r\n\r\n        );\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = state =>{\r\n   \r\n    return {\r\n        allThreats : state.threatsReducer.allThreats,\r\n        displayThreats : state.threatsReducer.displayThreats, \r\n        searchErrorMsg : state.threatsReducer.searchErrorMsg,\r\n        searchError : state.threatsReducer.searchError,\r\n        el : state.threatsReducer.el\r\n     }\r\n}\r\n\r\nconst mapDispatchStateToProps = dispatch => {\r\n    return {\r\n        threats : () => {\r\n          \r\n                var threatsData = [];\r\n               \r\n                    axios.get(backendURL + '/threat-details').then(result=>{\r\n                     \r\n                        threatsData = result.data;\r\n                        dispatch({type: \"threats\",payload : threatsData})\r\n                    })\r\n                  \r\n            \r\n        },\r\n\r\n        threatsummary : (id) => {\r\n            \r\n                dispatch({type: \"threatsummary\",payload : id})\r\n            },\r\n        \r\n        search : (searchQuery) => {\r\n                dispatch({type: \"search\" , payload: searchQuery})\r\n        }   ,   \r\n        resetSearch :()=>{\r\n            dispatch ({type : \"resetSearch\"})\r\n        }  ,\r\n        searchError :(type) =>{\r\n            dispatch ({type : \"searchError\", payload : type})\r\n        },\r\n       \r\n    \r\n        \r\n    }\r\n        \r\n    \r\n}\r\n\r\nexport default reduxForm({\r\n     form: \"SignupForm\",\r\n })(connect(mapStateToProps,mapDispatchStateToProps)(SearchThreats));  \r\n "]},"metadata":{},"sourceType":"module"}