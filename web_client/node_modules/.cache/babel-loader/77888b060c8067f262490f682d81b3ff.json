{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Aysha\\\\Desktop\\\\Aysha\\\\SJSU\\\\Fall 2019\\\\CMPE 295A\\\\project\\\\frontend\\\\src\\\\components\\\\ThreatSummary\\\\SearchThreats.js\";\nimport React, { Component } from \"react\";\nimport '../../App.css';\nimport LeftDrawer from '../Drawer/Drawer';\nimport axios from 'axios';\nimport { connect } from \"react-redux\";\nimport * as inputField from \"../../styles/inputField\";\nimport * as threatDisplayStyles from \"../../styles/threatimages\";\nimport Button from '@material-ui/core/Button';\nimport { searchButton } from \"../../styles/button\";\nimport * as radioStyles from \"../../styles/searchRadio\";\nimport { Field, reduxForm } from \"redux-form\";\nimport { Redirect } from \"react-router-dom\";\nimport * as threatDetails from \"./Threats\";\nimport io from \"socket.io-client\";\nimport backendURL from \"../../backendUrl\";\n\nclass SearchThreats extends Component {\n  constructor(props) {\n    super(props);\n\n    this.search = e => {\n      e.preventDefault();\n      console.log('Search attempted');\n      console.log(this.props.threatlinks);\n      console.log(e.target.dateRadio.checked);\n      console.log(e.target.cityRadio.checked);\n      console.log(e.target.locationRadio.checked);\n      console.log(e.target.severityRadio.checked);\n      console.log(e.target.certaintyRadio.checked);\n      console.log(e.target.searchQuery.value);\n    };\n\n    if (this.props.threatlinks.length == 0) this.props.threats();\n    this.state = {\n      redirectVar: null\n    };\n    this.search = this.search.bind(this);\n  }\n\n  componentDidMount() {\n    var socket = io(backendURL);\n    socket.on('update', function (update) {\n      console.log('recvd ' + update.link);\n    });\n  }\n\n  renderField(field) {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41\n      },\n      __self: this\n    }, React.createElement(\"input\", Object.assign({\n      style: field.style,\n      required: true,\n      placeholder: field.placeholder,\n      type: field.type\n    }, field.input, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42\n      },\n      __self: this\n    })));\n  }\n\n  render() {\n    var threatsDisplay = [];\n    /*var threatsDisplay =  this.props.threatlinks.map((threat) => (\r\n                \r\n            <td>\r\n              <img src ={threat} style={threatDisplayStyles.threatImage}></img>\r\n            </td> \r\n         \r\n         )) ;*/\n\n    console.log(threatDetails.threatDetails.threats);\n\n    for (var i = 0; i < this.props.threatlinks.length; i++) {\n      const index = i;\n      threatsDisplay.push(React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }));\n      threatsDisplay.push(React.createElement(\"img\", {\n        src: this.props.threatlinks[index].link,\n        style: threatDisplayStyles.threatImage,\n        onClick: () => {\n          this.props.threatsummary(index);\n          this.setState({\n            redirectVar: React.createElement(Redirect, {\n              to: \"/threat-summary\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 76\n              },\n              __self: this\n            })\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }));\n      threatsDisplay.push(React.createElement(\"div\", {\n        style: threatDisplayStyles.threatDetails,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, React.createElement(\"table\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, \"Date\")), React.createElement(\"td\", {\n        style: threatDisplayStyles.threatDetailsPadding,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, this.props.threatlinks[index].date\n      /*threatDetails.threatDetails.threats[i].date*/\n      )), React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, \"Location\")), React.createElement(\"td\", {\n        style: threatDisplayStyles.threatDetailsPadding,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, this.props.threatlinks[index].location)), React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, \"City\")), React.createElement(\"td\", {\n        style: threatDisplayStyles.threatDetailsPadding,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, this.props.threatlinks[index].city)), React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, \"Severity\")), React.createElement(\"td\", {\n        style: threatDisplayStyles.threatDetailsPadding,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, this.props.threatlinks[index].severity)), React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, \"Certainty\")), React.createElement(\"td\", {\n        style: threatDisplayStyles.threatDetailsPadding,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, this.props.threatlinks[index].certainty)))));\n      if (i + 1 < this.props.threatlinks.length && (i + 1) % 4 == 0) threatsDisplay.push(React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }));\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, React.createElement(LeftDrawer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.search,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(Field, {\n      placeholder: \"Search by date, city, location, severity or certainty of threat\",\n      name: \"searchQuery\",\n      style: inputField.searchInput,\n      type: \"text\",\n      component: this.renderField,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    })), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(Button, {\n      style: searchButton,\n      type: \"submit\",\n      variant: \"contained\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, \"Search\"))), React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      style: radioStyles.radioLabel,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"radio\",\n      name: \"searchRadio\",\n      id: \"dateRadio\",\n      style: radioStyles.searchRadio,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }), \"Date\"), React.createElement(\"label\", {\n      style: radioStyles.radioLabel,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"radio\",\n      name: \"searchRadio\",\n      id: \"cityRadio\",\n      style: radioStyles.radioMargin,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }), \"City\"), React.createElement(\"label\", {\n      style: radioStyles.radioLabel,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"radio\",\n      name: \"searchRadio\",\n      id: \"locationRadio\",\n      style: radioStyles.radioMargin,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }), \"Location\"), React.createElement(\"label\", {\n      style: radioStyles.radioLabel,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"radio\",\n      name: \"searchRadio\",\n      id: \"severityRadio\",\n      style: radioStyles.radioMargin,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }), \"Severity\"), React.createElement(\"label\", {\n      style: radioStyles.radioLabel,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"radio\",\n      name: \"searchRadio\",\n      id: \"certaintyRadio\",\n      style: radioStyles.radioMargin,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }), \"Certainty\"))))), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, this.state.redirectVar, React.createElement(\"table\", {\n      style: threatDisplayStyles.threatImageTable,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, threatsDisplay)));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    threatlinks: state.threatsReducer.threatlinks,\n    el: state.threatsReducer.el\n  };\n};\n\nconst mapDispatchStateToProps = dispatch => {\n  return {\n    threats: () => {\n      axios.get(backendURL + '/all-threats').then(response => {\n        console.log(response.data); // const threatIds = response.data;\n        //  axios.post(backendURL + '/threat-details', response.data).then(result=>{\n        //          console.log(result);\n        // })\n\n        dispatch({\n          type: \"threats\",\n          payload: response.data\n        });\n      });\n    },\n    threatsummary: id => {\n      dispatch({\n        type: \"threatsummary\",\n        payload: id\n      });\n    },\n    updateel: () => {\n      dispatch({\n        type: \"updateel\",\n        payload: 0\n      });\n    }\n  };\n};\n\nexport default reduxForm({\n  // validate,\n  form: \"SignupForm\"\n})(connect(mapStateToProps, mapDispatchStateToProps)(SearchThreats));","map":{"version":3,"sources":["C:/Users/Aysha/Desktop/Aysha/SJSU/Fall 2019/CMPE 295A/project/frontend/src/components/ThreatSummary/SearchThreats.js"],"names":["React","Component","LeftDrawer","axios","connect","inputField","threatDisplayStyles","Button","searchButton","radioStyles","Field","reduxForm","Redirect","threatDetails","io","backendURL","SearchThreats","constructor","props","search","e","preventDefault","console","log","threatlinks","target","dateRadio","checked","cityRadio","locationRadio","severityRadio","certaintyRadio","searchQuery","value","length","threats","state","redirectVar","bind","componentDidMount","socket","on","update","link","renderField","field","style","placeholder","type","input","render","threatsDisplay","i","index","push","threatImage","threatsummary","setState","threatDetailsPadding","date","location","city","severity","certainty","searchInput","radioLabel","searchRadio","radioMargin","threatImageTable","mapStateToProps","threatsReducer","el","mapDispatchStateToProps","dispatch","get","then","response","data","payload","id","updateel","form"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAO,eAAP;AACA,OAAOC,UAAP,MAAuB,kBAAvB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAO,KAAKC,UAAZ,MAA6B,yBAA7B;AACA,OAAO,KAAKC,mBAAZ,MAAqC,2BAArC;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,SAAQC,YAAR,QAA2B,qBAA3B;AACA,OAAO,KAAKC,WAAZ,MAA6B,0BAA7B;AACA,SAASC,KAAT,EAAgBC,SAAhB,QAAiC,YAAjC;AACA,SAAUC,QAAV,QAA0B,kBAA1B;AACA,OAAO,KAAKC,aAAZ,MAA+B,WAA/B;AAEA,OAAOC,EAAP,MAAe,kBAAf;AACA,OAAOC,UAAP,MAAuB,kBAAvB;;AAEA,MAAMC,aAAN,SAA4Bf,SAA5B,CAAsC;AAElCgB,EAAAA,WAAW,CAACC,KAAD,EAAO;AACd,UAAMA,KAAN;;AADc,SA2BlBC,MA3BkB,GA2BRC,CAAD,IAAM;AACXA,MAAAA,CAAC,CAACC,cAAF;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AAEAD,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKL,KAAL,CAAWM,WAAvB;AACAF,MAAAA,OAAO,CAACC,GAAR,CAAYH,CAAC,CAACK,MAAF,CAASC,SAAT,CAAmBC,OAA/B;AACAL,MAAAA,OAAO,CAACC,GAAR,CAAYH,CAAC,CAACK,MAAF,CAASG,SAAT,CAAmBD,OAA/B;AACAL,MAAAA,OAAO,CAACC,GAAR,CAAYH,CAAC,CAACK,MAAF,CAASI,aAAT,CAAuBF,OAAnC;AACAL,MAAAA,OAAO,CAACC,GAAR,CAAYH,CAAC,CAACK,MAAF,CAASK,aAAT,CAAuBH,OAAnC;AACAL,MAAAA,OAAO,CAACC,GAAR,CAAYH,CAAC,CAACK,MAAF,CAASM,cAAT,CAAwBJ,OAApC;AAEAL,MAAAA,OAAO,CAACC,GAAR,CAAYH,CAAC,CAACK,MAAF,CAASO,WAAT,CAAqBC,KAAjC;AAEH,KAxCiB;;AAEf,QAAG,KAAKf,KAAL,CAAWM,WAAX,CAAuBU,MAAvB,IAAiC,CAApC,EACM,KAAKhB,KAAL,CAAWiB,OAAX;AACN,SAAKC,KAAL,GAAY;AACXC,MAAAA,WAAW,EAAE;AADF,KAAZ;AAGE,SAAKlB,MAAL,GAAc,KAAKA,MAAL,CAAYmB,IAAZ,CAAiB,IAAjB,CAAd;AACJ;;AACDC,EAAAA,iBAAiB,GAAE;AAEb,QAAIC,MAAM,GAAG1B,EAAE,CAACC,UAAD,CAAf;AACAyB,IAAAA,MAAM,CAACC,EAAP,CAAU,QAAV,EAAoB,UAAUC,MAAV,EACpB;AACMpB,MAAAA,OAAO,CAACC,GAAR,CAAY,WAAWmB,MAAM,CAACC,IAA9B;AACL,KAHD;AAIL;;AAEDC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AAEf,WACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAO,MAAA,KAAK,EAAGA,KAAK,CAACC,KAArB;AAA4B,MAAA,QAAQ,MAApC;AAAqC,MAAA,WAAW,EAAED,KAAK,CAACE,WAAxD;AAAqE,MAAA,IAAI,EAAEF,KAAK,CAACG;AAAjF,OAA2FH,KAAK,CAACI,KAAjG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OADJ,CADJ;AAMH;;AAeDC,EAAAA,MAAM,GAAG;AAET,QAAIC,cAAc,GAAC,EAAnB;AACA;;;;;;;;AAOK7B,IAAAA,OAAO,CAACC,GAAR,CAAYV,aAAa,CAACA,aAAd,CAA4BsB,OAAxC;;AACA,SAAI,IAAIiB,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAC,KAAKlC,KAAL,CAAWM,WAAX,CAAuBU,MAAxC,EAAgDkB,CAAC,EAAjD,EACG;AACK,YAAMC,KAAK,GAAED,CAAb;AACDD,MAAAA,cAAc,CAACG,IAAf,CAAoB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAApB;AACAH,MAAAA,cAAc,CAACG,IAAf,CAAoB;AAAK,QAAA,GAAG,EAAG,KAAKpC,KAAL,CAAWM,WAAX,CAAuB6B,KAAvB,EAA8BV,IAAzC;AAA+C,QAAA,KAAK,EAAErC,mBAAmB,CAACiD,WAA1E;AAAuF,QAAA,OAAO,EAAE,MAAI;AAAC,eAAKrC,KAAL,CAAWsC,aAAX,CAAyBH,KAAzB;AAAkC,eAAKI,QAAL,CAAc;AAACpB,YAAAA,WAAW,EAAG,oBAAC,QAAD;AAAU,cAAA,EAAE,EAAC,iBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAf,WAAd;AAAgE,SAAvM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAApB;AACAc,MAAAA,cAAc,CAACG,IAAf,CAAoB;AAAK,QAAA,KAAK,EAAEhD,mBAAmB,CAACO,aAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAChB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAJ,CADJ,EAEI;AAAI,QAAA,KAAK,EAAEP,mBAAmB,CAACoD,oBAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAsD,KAAKxC,KAAL,CAAWM,WAAX,CAAuB6B,KAAvB,EAA8BM;AAAI;AAAxF,OAFJ,CADA,EAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAJ,CADJ,EAEI;AAAI,QAAA,KAAK,EAAErD,mBAAmB,CAACoD,oBAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAsD,KAAKxC,KAAL,CAAWM,WAAX,CAAuB6B,KAAvB,EAA8BO,QAApF,CAFJ,CALA,EASA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAJ,CADJ,EAEI;AAAI,QAAA,KAAK,EAAEtD,mBAAmB,CAACoD,oBAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAsD,KAAKxC,KAAL,CAAWM,WAAX,CAAuB6B,KAAvB,EAA8BQ,IAApF,CAFJ,CATA,EAaA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAJ,CADJ,EAEI;AAAI,QAAA,KAAK,EAAEvD,mBAAmB,CAACoD,oBAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAsD,KAAKxC,KAAL,CAAWM,WAAX,CAAuB6B,KAAvB,EAA8BS,QAApF,CAFJ,CAbA,EAiBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAAJ,CADJ,EAEI;AAAI,QAAA,KAAK,EAAExD,mBAAmB,CAACoD,oBAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAsD,KAAKxC,KAAL,CAAWM,WAAX,CAAuB6B,KAAvB,EAA8BU,SAApF,CAFJ,CAjBA,CADgB,CAApB;AAwBA,UAAGX,CAAC,GAAC,CAAF,GAAI,KAAKlC,KAAL,CAAWM,WAAX,CAAuBU,MAA3B,IAAqC,CAACkB,CAAC,GAAC,CAAH,IAAM,CAAN,IAAU,CAAlD,EACID,cAAc,CAACG,IAAf,CAAoB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAApB;AACP;;AAEL,WACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAM,MAAA,QAAQ,EAAI,KAAKnC,MAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,KAAD;AAAO,MAAA,WAAW,EAAC,iEAAnB;AACO,MAAA,IAAI,EAAC,aADZ;AAEO,MAAA,KAAK,EAAGd,UAAU,CAAC2D,WAF1B;AAGO,MAAA,IAAI,EAAG,MAHd;AAIO,MAAA,SAAS,EAAE,KAAKpB,WAJvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CADJ,EASI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,MAAD;AAAS,MAAA,KAAK,EAAEpC,YAAhB;AAA8B,MAAA,IAAI,EAAC,QAAnC;AAA6C,MAAA,OAAO,EAAC,WAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,CATJ,CADJ,EAcI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACQ;AAAO,MAAA,KAAK,EAAEC,WAAW,CAACwD,UAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAuC;AAAO,MAAA,IAAI,EAAC,OAAZ;AAAoB,MAAA,IAAI,EAAC,aAAzB;AAAuC,MAAA,EAAE,EAAC,WAA1C;AAAsD,MAAA,KAAK,EAAExD,WAAW,CAACyD,WAAzE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAvC,SADR,EAEQ;AAAO,MAAA,KAAK,EAAEzD,WAAW,CAACwD,UAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAuC;AAAO,MAAA,IAAI,EAAC,OAAZ;AAAoB,MAAA,IAAI,EAAC,aAAzB;AAAuC,MAAA,EAAE,EAAC,WAA1C;AAAuD,MAAA,KAAK,EAAExD,WAAW,CAAC0D,WAA1E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAvC,SAFR,EAGQ;AAAO,MAAA,KAAK,EAAE1D,WAAW,CAACwD,UAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAuC;AAAO,MAAA,IAAI,EAAC,OAAZ;AAAoB,MAAA,IAAI,EAAC,aAAzB;AAAuC,MAAA,EAAE,EAAC,eAA1C;AAA2D,MAAA,KAAK,EAAExD,WAAW,CAAC0D,WAA9E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAvC,aAHR,EAIQ;AAAO,MAAA,KAAK,EAAE1D,WAAW,CAACwD,UAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAuC;AAAO,MAAA,IAAI,EAAC,OAAZ;AAAoB,MAAA,IAAI,EAAC,aAAzB;AAAuC,MAAA,EAAE,EAAC,eAA1C;AAA2D,MAAA,KAAK,EAAExD,WAAW,CAAC0D,WAA9E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAvC,aAJR,EAKQ;AAAO,MAAA,KAAK,EAAE1D,WAAW,CAACwD,UAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAsC;AAAO,MAAA,IAAI,EAAC,OAAZ;AAAoB,MAAA,IAAI,EAAC,aAAzB;AAAuC,MAAA,EAAE,EAAC,gBAA1C;AAA2D,MAAA,KAAK,EAAExD,WAAW,CAAC0D,WAA9E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAtC,cALR,CAdJ,CADJ,CADJ,CAFJ,EA6BI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACK,KAAK/B,KAAL,CAAWC,WADhB,EAEK;AAAO,MAAA,KAAK,EAAE/B,mBAAmB,CAAC8D,gBAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACIjB,cADJ,CAFL,CA7BJ,CADA;AAwCH;;AA/HiC;;AAmItC,MAAMkB,eAAe,GAAGjC,KAAK,IAAG;AAE5B,SAAO;AACHZ,IAAAA,WAAW,EAAGY,KAAK,CAACkC,cAAN,CAAqB9C,WADhC;AAEH+C,IAAAA,EAAE,EAAGnC,KAAK,CAACkC,cAAN,CAAqBC;AAFvB,GAAP;AAIH,CAND;;AAQA,MAAMC,uBAAuB,GAAGC,QAAQ,IAAI;AACxC,SAAO;AACHtC,IAAAA,OAAO,EAAG,MAAM;AACZhC,MAAAA,KAAK,CAACuE,GAAN,CAAU3D,UAAU,GAAG,cAAvB,EAAuC4D,IAAvC,CAA4CC,QAAQ,IAAE;AAClDtD,QAAAA,OAAO,CAACC,GAAR,CAAYqD,QAAQ,CAACC,IAArB,EADkD,CAEpD;AACA;AACA;AACC;;AACCJ,QAAAA,QAAQ,CAAC;AAACzB,UAAAA,IAAI,EAAE,SAAP;AAAiB8B,UAAAA,OAAO,EAAGF,QAAQ,CAACC;AAApC,SAAD,CAAR;AACH,OAPD;AAQH,KAVE;AAYHrB,IAAAA,aAAa,EAAIuB,EAAD,IAAQ;AAEhBN,MAAAA,QAAQ,CAAC;AAACzB,QAAAA,IAAI,EAAE,eAAP;AAAuB8B,QAAAA,OAAO,EAAGC;AAAjC,OAAD,CAAR;AACH,KAfF;AAkBHC,IAAAA,QAAQ,EAAG,MAAM;AAEbP,MAAAA,QAAQ,CAAC;AAACzB,QAAAA,IAAI,EAAE,UAAP;AAAkB8B,QAAAA,OAAO,EAAG;AAA5B,OAAD,CAAR;AACH;AArBE,GAAP;AA0BH,CA3BD;;AA6BA,eAAenE,SAAS,CAAC;AACrB;AACCsE,EAAAA,IAAI,EAAE;AAFc,CAAD,CAAT,CAGX7E,OAAO,CAACiE,eAAD,EAAiBG,uBAAjB,CAAP,CAAiDxD,aAAjD,CAHW,CAAf","sourcesContent":["import React, { Component } from \"react\";\r\nimport '../../App.css';\r\nimport LeftDrawer from '../Drawer/Drawer';\r\nimport axios from 'axios';\r\nimport { connect } from \"react-redux\";\r\nimport * as inputField from  \"../../styles/inputField\";\r\nimport * as threatDisplayStyles from \"../../styles/threatimages\";\r\nimport Button from '@material-ui/core/Button'\r\nimport {searchButton} from \"../../styles/button\";\r\nimport * as radioStyles from \"../../styles/searchRadio\";\r\nimport { Field, reduxForm } from \"redux-form\";\r\nimport {  Redirect } from \"react-router-dom\";\r\nimport * as threatDetails from \"./Threats\";\r\n\r\nimport io from \"socket.io-client\";\r\nimport backendURL from \"../../backendUrl\";\r\n\r\nclass SearchThreats extends Component {\r\n\r\n    constructor(props){\r\n        super(props); \r\n       if(this.props.threatlinks.length == 0)\r\n             this.props.threats();\r\n       this.state ={\r\n        redirectVar :null,\r\n    } \r\n         this.search = this.search.bind(this);\r\n    }\r\n    componentDidMount(){\r\n\r\n          var socket = io(backendURL);\r\n          socket.on('update', function (update)\r\n          {\r\n                console.log('recvd ' + update.link );\r\n          });\r\n    }\r\n    \r\n    renderField(field) {\r\n     \r\n        return (\r\n            <div>\r\n                <input style= {field.style} required placeholder={field.placeholder} type={field.type} {...field.input} />\r\n            </div>  \r\n            \r\n        );\r\n    }\r\n    search = (e) =>{\r\n        e.preventDefault();\r\n        console.log('Search attempted');\r\n    \r\n        console.log(this.props.threatlinks);\r\n        console.log(e.target.dateRadio.checked);\r\n        console.log(e.target.cityRadio.checked);\r\n        console.log(e.target.locationRadio.checked);\r\n        console.log(e.target.severityRadio.checked);\r\n        console.log(e.target.certaintyRadio.checked);\r\n\r\n        console.log(e.target.searchQuery.value);\r\n\r\n    }\r\n    render() {\r\n  \r\n    var threatsDisplay=[] ;\r\n    /*var threatsDisplay =  this.props.threatlinks.map((threat) => (\r\n                \r\n            <td>\r\n              <img src ={threat} style={threatDisplayStyles.threatImage}></img>\r\n            </td> \r\n         \r\n         )) ;*/\r\n         console.log(threatDetails.threatDetails.threats);\r\n         for(var i = 0; i<this.props.threatlinks.length; i++)\r\n            {\r\n                 const index =i;\r\n                threatsDisplay.push(<td></td>);\r\n                threatsDisplay.push(<img src ={this.props.threatlinks[index].link} style={threatDisplayStyles.threatImage} onClick={()=>{this.props.threatsummary(index) ; this.setState({redirectVar : <Redirect to=\"/threat-summary\"/>})}}></img>);\r\n                threatsDisplay.push(<div style={threatDisplayStyles.threatDetails}>\r\n                    <table>\r\n                    <tr>\r\n                        <td><b>Date</b></td>\r\n                        <td style={threatDisplayStyles.threatDetailsPadding}>{this.props.threatlinks[index].date/*threatDetails.threatDetails.threats[i].date*/}</td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td><b>Location</b></td>\r\n                        <td style={threatDisplayStyles.threatDetailsPadding}>{this.props.threatlinks[index].location}</td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td><b>City</b></td>\r\n                        <td style={threatDisplayStyles.threatDetailsPadding}>{this.props.threatlinks[index].city}</td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td><b>Severity</b></td>\r\n                        <td style={threatDisplayStyles.threatDetailsPadding}>{this.props.threatlinks[index].severity}</td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td><b>Certainty</b></td>\r\n                        <td style={threatDisplayStyles.threatDetailsPadding}>{this.props.threatlinks[index].certainty}</td>\r\n                    </tr>\r\n                </table>\r\n                </div>)\r\n                if(i+1<this.props.threatlinks.length && (i+1)%4 ==0)\r\n                    threatsDisplay.push(<tr></tr>);\r\n            }\r\n    \r\n        return (\r\n        <div   >\r\n            <LeftDrawer></LeftDrawer>\r\n            <div>\r\n                <form onSubmit = {this.search}>\r\n                    <table>\r\n                        <tr>\r\n                            <td>\r\n                                <Field placeholder=\"Search by date, city, location, severity or certainty of threat\"\r\n                                       name=\"searchQuery\"\r\n                                       style= {inputField.searchInput}\r\n                                       type = \"text\"\r\n                                       component={this.renderField}\r\n                                />\r\n                            </td>\r\n                            <td>\r\n                                <Button  style={searchButton} type=\"submit\"  variant=\"contained\" >Search</Button>\r\n                            </td>\r\n                        </tr>\r\n                        <tr >\r\n                                <label style={radioStyles.radioLabel} ><input type=\"radio\" name=\"searchRadio\" id=\"dateRadio\" style={radioStyles.searchRadio}></input>Date</label>\r\n                                <label style={radioStyles.radioLabel} ><input type=\"radio\" name=\"searchRadio\" id=\"cityRadio\"  style={radioStyles.radioMargin}></input>City</label>\r\n                                <label style={radioStyles.radioLabel} ><input type=\"radio\" name=\"searchRadio\" id=\"locationRadio\"  style={radioStyles.radioMargin}></input>Location</label>\r\n                                <label style={radioStyles.radioLabel} ><input type=\"radio\" name=\"searchRadio\" id=\"severityRadio\"  style={radioStyles.radioMargin}></input>Severity</label> \r\n                                <label style={radioStyles.radioLabel}><input type=\"radio\" name=\"searchRadio\" id=\"certaintyRadio\" style={radioStyles.radioMargin}></input>Certainty</label>  \r\n                        </tr>\r\n                    </table>\r\n                </form>\r\n            </div>\r\n\r\n            <div>\r\n                {this.state.redirectVar}\r\n                 <table style={threatDisplayStyles.threatImageTable} >\r\n                    {threatsDisplay}\r\n                 </table>\r\n            </div>\r\n   \r\n        </div> \r\n\r\n        );\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = state =>{\r\n   \r\n    return {\r\n        threatlinks : state.threatsReducer.threatlinks,\r\n        el : state.threatsReducer.el\r\n     }\r\n}\r\n\r\nconst mapDispatchStateToProps = dispatch => {\r\n    return {\r\n        threats : () => {\r\n            axios.get(backendURL + '/all-threats').then(response=>{\r\n                console.log(response.data);\r\n              // const threatIds = response.data;\r\n              //  axios.post(backendURL + '/threat-details', response.data).then(result=>{\r\n              //          console.log(result);\r\n               // })\r\n                dispatch({type: \"threats\",payload : response.data})\r\n            }) \r\n        },\r\n\r\n        threatsummary : (id) => {\r\n            \r\n                dispatch({type: \"threatsummary\",payload : id})\r\n            },\r\n        \r\n                    \r\n        updateel : () => {\r\n            \r\n            dispatch({type: \"updateel\",payload : 0})\r\n        }\r\n    \r\n    }\r\n        \r\n    \r\n}\r\n\r\nexport default reduxForm({\r\n    // validate,\r\n     form: \"SignupForm\",\r\n })(connect(mapStateToProps,mapDispatchStateToProps)(SearchThreats));  \r\n "]},"metadata":{},"sourceType":"module"}